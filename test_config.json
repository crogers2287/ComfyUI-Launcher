{
  "recovery_test_configuration": {
    "description": "Configuration for ComfyUI Launcher recovery system tests",
    "version": "1.0.0",
    "last_updated": "2024-01-15T00:00:00Z"
  },
  
  "test_execution": {
    "timeout_seconds": 300,
    "max_parallel_workers": 8,
    "retry_failed_tests": true,
    "max_test_retries": 2,
    "enable_performance_profiling": true,
    "generate_detailed_reports": true,
    "cleanup_after_tests": true
  },
  
  "test_categories": {
    "unit_tests": {
      "enabled": true,
      "description": "Test individual recovery components",
      "timeout": 60,
      "max_workers": 4,
      "test_files": [
        "backend/tests/recovery/test_comprehensive_recovery.py",
        "backend/tests/recovery/test_decorator.py",
        "backend/tests/recovery/test_persistence.py",
        "backend/tests/recovery/test_strategies.py"
      ]
    },
    
    "integration_tests": {
      "enabled": true,
      "description": "Test frontend-backend integration with recovery",
      "timeout": 120,
      "max_workers": 2,
      "test_files": [
        "backend/tests/recovery/test_integration_scenarios.py",
        "web/src/test/recovery.test.tsx"
      ]
    },
    
    "e2e_tests": {
      "enabled": true,
      "description": "End-to-end recovery scenario testing",
      "timeout": 600,
      "max_workers": 1,
      "test_files": [
        "backend/tests/recovery/test_end_to_end_scenarios.py"
      ],
      "scenarios": [
        "network_interruption_model_download",
        "app_crash_workflow_import",
        "browser_refresh_installation",
        "concurrent_recoveries",
        "resource_constraint_recovery",
        "disaster_recovery_scenario"
      ]
    },
    
    "performance_tests": {
      "enabled": true,
      "description": "Performance benchmarking and load testing",
      "timeout": 300,
      "max_workers": 2,
      "test_files": [
        "backend/tests/recovery/test_performance_benchmarks.py"
      ]
    }
  },
  
  "recovery_scenarios": {
    "network_interruption": {
      "description": "Test recovery from network interruptions during operations",
      "failure_types": [
        "connection_reset",
        "timeout",
        "dns_resolution_failure",
        "bandwidth_throttling"
      ],
      "recovery_strategies": [
        "exponential_backoff",
        "linear_backoff",
        "circuit_breaker"
      ],
      "success_threshold": 0.9,
      "max_recovery_time": 30000
    },
    
    "app_crash": {
      "description": "Test recovery from application crashes",
      "crash_types": [
        "memory_error",
        "segmentation_fault",
        "unhandled_exception"
      ],
      "persistence_required": true,
      "success_threshold": 0.85,
      "max_recovery_time": 60000
    },
    
    "browser_refresh": {
      "description": "Test recovery after browser refresh/tab close",
      "state_types": [
        "form_data",
        "download_progress",
        "ui_preferences",
        "operation_state"
      ],
      "success_threshold": 0.95,
      "max_recovery_time": 10000
    },
    
    "concurrent_operations": {
      "description": "Test handling of multiple concurrent recoveries",
      "max_concurrent_operations": 50,
      "failure_patterns": [
        "random_failures",
        "burst_failures",
        "cascading_failures"
      ],
      "success_threshold": 0.8,
      "max_recovery_time": 45000
    }
  },
  
  "performance_thresholds": {
    "max_overhead_percentage": 20.0,
    "max_recovery_time_ms": 5000.0,
    "max_memory_increase_mb": 50.0,
    "min_success_rate": 90.0,
    "max_concurrent_failures": 0.1,
    "response_time_p95_ms": 1000.0,
    "throughput_min_ops_per_sec": 10.0
  },
  
  "load_testing": {
    "concurrent_users": [10, 25, 50, 100],
    "duration_per_test": 30,
    "failure_rate": 0.1,
    "ramp_up_time": 5,
    "think_time": 1.0,
    "max_error_rate": 0.05
  },
  
  "persistence_backends": {
    "memory": {
      "enabled": true,
      "description": "In-memory persistence for testing",
      "cleanup_required": false
    },
    "sqlite": {
      "enabled": true,
      "description": "SQLite persistence for production-like testing",
      "cleanup_required": true
    }
  },
  
  "error_injection": {
    "enabled": true,
    "failure_patterns": [
      "network_failure",
      "service_timeout",
      "resource_exhaustion",
      "data_corruption"
    ],
    "injection_rate": 0.15,
    "recovery_expectation": 0.9
  },
  
  "monitoring": {
    "enable_system_monitoring": true,
    "sample_interval_ms": 500,
    "metrics_to_collect": [
      "cpu_usage",
      "memory_usage",
      "disk_io",
      "network_io",
      "recovery_times",
      "operation_counts"
    ],
    "alert_thresholds": {
      "cpu_usage_percent": 90.0,
      "memory_usage_percent": 85.0,
      "disk_usage_percent": 80.0,
      "error_rate_percent": 5.0
    }
  },
  
  "reporting": {
    "generate_json_report": true,
    "generate_html_report": true,
    "generate_csv_summary": true,
    "include_performance_metrics": true,
    "include_system_metrics": true,
    "include_detailed_logs": true,
    "report_retention_days": 30
  },
  
  "environment": {
    "test_data_directory": "/tmp/comfyui_test_data",
    "database_url": "sqlite+aiosqlite:///test_recovery.db",
    "log_level": "INFO",
    "debug_mode": false,
    "cleanup_test_data": true
  },
  
  "dependencies": {
    "required_python_packages": [
      "pytest>=7.0.0",
      "pytest-asyncio>=0.21.0",
      "pytest-timeout>=2.1.0",
      "aiohttp>=3.8.0",
      "psutil>=5.9.0",
      "asyncio-mqtt>=0.16.0"
    ],
    "required_node_packages": [
      "@testing-library/react>=13.0.0",
      "@testing-library/jest-dom>=5.16.0",
      "vitest>=0.34.0",
      "jsdom>=22.0.0"
    ],
    "system_requirements": {
      "python_version": ">=3.8.0",
      "node_version": ">=16.0.0",
      "minimum_ram_mb": 2048,
      "minimum_disk_space_gb": 2
    }
  },
  
  "test_data": {
    "sample_models": [
      {
        "id": "sd_xl_base",
        "name": "Stable Diffusion XL Base",
        "size_gb": 6.9,
        "type": "checkpoint",
        "url": "https://huggingface.co/stabilityai/stable-diffusion-xl-base-1.0"
      },
      {
        "id": "sd_xl_refiner",
        "name": "Stable Diffusion XL Refiner", 
        "size_gb": 6.9,
        "type": "checkpoint",
        "url": "https://huggingface.co/stabilityai/stable-diffusion-xl-refiner-1.0"
      }
    ],
    
    "sample_workflows": [
      {
        "id": "txt2img_basic",
        "name": "Text to Image Basic",
        "nodes": 5,
        "complexity": "simple"
      },
      {
        "id": "img2img_advanced", 
        "name": "Image to Image Advanced",
        "nodes": 12,
        "complexity": "complex"
      }
    ],
    
    "sample_projects": [
      {
        "id": "portrait_project",
        "name": "Portrait Generation",
        "models": ["sd_xl_base"],
        "workflows": ["txt2img_basic"]
      },
      {
        "id": "art_project", 
        "name": "Art Generation",
        "models": ["sd_xl_base", "sd_xl_refiner"],
        "workflows": ["txt2img_basic", "img2img_advanced"]
      }
    ]
  },
  
  "customization": {
    "test_environment_variables": {
      "COMFYUI_RECOVERY_ENABLED": "true",
      "COMFYUI_RECOVERY_MAX_RETRIES": "3",
      "COMFYUI_RECOVERY_INITIAL_DELAY": "1.0",
      "COMFYUI_RECOVERY_BACKOFF_FACTOR": "2.0",
      "COMFYUI_RECOVERY_TIMEOUT": "300"
    },
    
    "overridable_settings": {
      "recovery_strategies": ["exponential", "linear", "fixed"],
      "persistence_backends": ["memory", "sqlite"],
      "error_classification_rules": ["network", "timeout", "resource"],
      "circuit_breaker_settings": {
        "threshold": 5,
        "timeout": 300
      }
    }
  }
}